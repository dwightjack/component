<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>

    <div id="test">
        <input type="text" id="input" />
        <div id="child"></div>

    </div>

    <script src="https://unpkg.com/desandro-classie@1.0.1/classie.js"></script>
    <script src="https://unpkg.com/tsumami"></script>
    <script src="../umd/index.js"></script>
    <script>
    (function () {

        window.Child = Component.extend({

            bindStateEvents() {
                return {
                    text: function (text) {
                        this.$el.innerHTML = text;
                    }
                }
            }
        });

        const child = new Child('#child');

        window.Test = Component.extend({

            getInitialState: function () {
                return {
                    title: 'Ciao'
                };
            },

            beforeInit: function () {

                this.$els.input = tsumami.dom.qs('#input');

                var self = this;

                this.$ev.on(this.$els.input, 'keyup', function (e) {
                    self.setState('title', e.target.value);
                });

                this.setRef({
                    id: 'child',
                    component: child,
                    props: {
                        title: 'text'
                    }
                });

            }
        });



        window.test = new Test('#test').init();

    }());
    </script>
</body>
</html>