<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## Component

`Component` is an extensible class constructor which provides the building block of Yuzu component system.

### Signature summary

#### Lifecycle methods

-   [init](./component.md#init)
-   [mount](./component.md#mount)
-   [destroy](./component.md#destroy)

#### Initialization hooks

-   [getInitialState](./component.md#getinitialstate)
-   [getDefaultOptions](./component.md#getdefaultoptions)
-   [bindStateEvents](./component.md#bindstateevents)

#### State management

-   [getState](./component.md#getstate)
-   [setState](./component.md#setstate)

#### Lifecycle hooks

-   [created](./component.md#created) (instance created)
-   [mounted](./component.md#mounted) (mounted onto the DOM)
-   [beforeInit](./component.md#beforeinit) (just before state and event bindings evaluation)
-   [afterInit](./component.md#afterinit) (instance fully initialized)
-   [beforeDestroy](./component.md#beforedestroy) (just before tearing down the instance)

#### Event bus

-   [on](./component.md#on)
-   [off](./component.md#off)
-   [emit](./component.md#emit)

#### Child management methods

-   [setRef](./component.md#setref)
-   [broadcast](./component.md#broadcast)

**Parameters**

-   `el` **RootElement** 
-   `options` **optionsType**  (optional, default `{}`)

### $el

Root element

Type: [Element](https://developer.mozilla.org/docs/Web/API/Element)

### $els

Map of child elements reference

Type: {}

### $refs

-   **See: [#setRef](#setRef)**

Map of references to child components

Type: {}

### options

Component options

Type: optionsType

### $ev

-   **See: <https://github.com/dwightjack/tsumami/blob/master/doc/events.md#eventmanager>**

DOM event manager

Type: EventManager

### state

Component state

Type: stateType

### on

-   **See: <https://github.com/charlike/dush#on>**

Attaches an event handler

Type: dushInstance.on

**Examples**

```javascript
instance.on('myevent', (param) => {
 ...
});
```

### off

-   **See: <https://github.com/charlike/dush#off>**

Removes an event handler

Type: dushInstance.off

**Examples**

```javascript
const handler = (param) => { ... };

//attach an event handler
instance.on('myevent', handler);

//remove it
instance.off('myevent', handler);
```

### once

-   **See: <https://github.com/charlike/dush#once>**

Attaches a one-time event handler

Type: dushInstance.once

**Examples**

```javascript
const handlerOnce = (param) => { ... };

//attach an event handler
instance.once('myevent', handlerOnce)
```

### emit

-   **See: <https://github.com/charlike/dush#emit>**

Emits an event

Type: dushInstance.emit

**Examples**

```javascript
const handler = (...params) => { console.log(params); };

//attach an event handler
instance.on('log', handler);

instance.emit('log', 'test', 1); //logs ['test', 1]
```

### mount

Mounts the compontent instance onto a DOM element

**Parameters**

-   `el` **RootElement** 

**Examples**

```javascript
const instance = new Component();

instance.mount('#app');
//instance.$el.id === 'app'
```

### init

Initializes a component instance with optional state

**Parameters**

-   `state` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)?**  (optional, default `{}`)

**Examples**

```javascript
const instance = new Component('#app');
instance.init({ a: 1 });
instance.getState('a'); // 1
```

Returns **[Component](#component)** 

### bindStateEvents

Returns an event binding configuration object to be used during initialization.

Object values can be either a function or a string pointing to an instance's method

**Examples**

```javascript
class Child extends Component {
 bindStateEvents() {
     return { a: (a) => console.log(`value is ${a}`) }
 }
}

const instance = new Child('#app').init();

instance.setState('a', 1); //logs: value is 1
```

Returns **{}** 

### getInitialState

Returns an object with the component default state

**Examples**

```javascript
class Gallery extends Component {
 getInitialState() {
     return { currentImage: 0 };
 }
}

const gallery = new Gallery().init();
//gallery.getState('currentImage') === 0
```

Returns **stateType** 

### getDefaultOptions

Returns an object with the component default options

**Examples**

```javascript
class Gallery extends Component {
 getDefaultOptions() {
     return { pagination: true };
 }
}

const gallery = new Gallery().init();
//gallery.options.pagination === true
```

Returns **optionsType** 

### created

Lifecycle hook called on instance creation

Returns **void** 

### mounted

Lifecycle hook called when the instance got mount onto a DOM element

Returns **void** 

### beforeInit

Lifecycle hook called before instance inizialization. At this stage component's state is empty

Returns **void** 

### afterInit

Lifecycle hook called after instance inizialization. State and event binding are already in place

Returns **void** 

### beforeDestroy

Lifecycle hook called just before closing child refs

Returns **void** 

### getState

Returns a state property

**Parameters**

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 

**Examples**

```javascript
const instance = new Component('#app').init({ a: 1 });
// instancce.getState('a') === 1
```

Returns **any** 

### setState

Sets a state property. If the new value is different from the old one it emits a `change:<property>` event.
To prevent this behavior set the 3rd argument to `true`

**Parameters**

-   `key` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `newValue` **any** 
-   `silent` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)**  (optional, default `false`)

**Examples**

```javascript
instance.on('change:a', (next, prev) => console.log(next, prev));
instance.setState('a', 1); //emits 'change:a' -> logs undefined,1

instance.setState('a', 1); //nothing happens
instance.setState('a', 2, true); //nothing happens, again...
```

### broadcast

Emits a `broadcast:<eventname>` event to every child element listed as a `$ref`

**Parameters**

-   `event` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** 
-   `params` **...[Array](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array)&lt;any>** 

**Examples**

```javascript
const child = new Component('#child');
child.on('broadcast:log', (str) => console.log(str));

instance.setRef({ id: 'child', component: child });
instance.broadcast('log', 'test') // child component logs 'test'
```

### setRef

Attaches a reference to a child component.
If a reference `id` is already attached, the previous one is destroyed and replaced with the new one

**Parameters**

-   `refCfg` **(refConstructorType | refInstanceType)** 

**Examples**

```javascript
// as Constructor
instance.setRef({
 id: 'child',
 component: ChildComponent,
 el: '#child',
 options: { ... }
});

// as instance
instance.setRef({
 id: 'child',
 component: new ChildComponent('#child', { ... }) // <-- don't call `init`
});
```

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;[Component](#component)>** 

### destroy

Detaches DOM events, instance's events and destroys all references as well

Returns **[Promise](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)&lt;void>** 

### create

Returns a new Component constructor with optional proptotype and static methods

For usage in ES5 environments. In ES2015+ you can extend the `Component` class itself.

**Parameters**

-   `obj` **{}** 
-   `statics` **{}** 

**Examples**

```javascript
var ChildComponent = Component.create({
     myMethod: function () {
         return this.options.str
     }
}, {
     myStatic: function () {
         return 'a string';
     }
});

ChildComponent.myStatic(); // returns 'a string'

var child = new ChildComponent('.child', { str: 'demo' });
child.init();

child.myMethod(); // returns 'demo'
```
