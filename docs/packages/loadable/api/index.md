<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

# Loadable

A function that returns a configurable async component loader.

### Parameters

-   `opts` **[object][1]** 
    -   `opts.component` **Component** Component to make async
    -   `opts.null` **any** -   Any other property will be merged with the Loadable default options

## Examples

```javascript
class Message extends Component {}
class Loader extends Component {}

const delay = () => new Promise((resolve) => {
  setTimeout(() => {
    resolve({ message: 'Hello World' });
  }, 1000);
});

const template = (props) => `<div class="Message">${props.message}</div>`;

const LoadableMessage = Loadable({
  component: Message,
  loader: Loader,
  fetchData: delay,
  template
});

const message = new LoadableMessage().mount('#loadable-message');
```

Returns **[Loadable][2]** Component constructor

# LoadableComponent

**Extends Component**

Async component loader

## Parameters

-   `config` **[object][1]?** 
    -   `config.component` **Component** Component to initialize when `config.fetchData` is resolved
    -   `config.fetchData` **[function][3]?** A function to load remote data. Must return a promise
    -   `config.template` **[function][3]?** Component template. A function returning a string
    -   `config.loader` **Component?** Loader component. Shown during `config.fetchData` execution
    -   `config.options` **[object][1]?** Component options
    -   `config.props` **props?** Computed state attached to the component

Returns **[Loadable][2]** 

## mounted

Mounted hook

Will replace the current root element contents with an empty element used as root for both the optional loader (passed as `config.loader` to the constructor)
and the async component.

It will then set the loader (if available) and fetch the data (`config.fetchData`) before initializing the async component.

Returns **[Loadable][2]** 

## setComponent

Initializes the async component as child of the loadable instance.

The component will be attached as component child into `$refs.async`.

### Parameters

-   `root` **[Element][4]?** Component root element. Will default the `$els.async` if not defined.

### Examples

```javascript
class Loader extends Component {
  // ...
}

const LoadableMessage = Loadable({
  component: Message,
});

const loadable = new LoadableMessage();
loadable.setComponent()

instanceof loadable.$refs.async === Message
```

Returns **[Promise][5]** 

## setLoader

Initializes a loader

If defined, will initialize the loader component set in `config.loader`,
else will return a resolved promise.

The loader will be attached as component child into `$refs.async`.

### Examples

```javascript
class Loader extends Component {
  // ...
}

const LoadableMessage = Loadable({
  component: Message,
  loader: Loader
});

const loadable = new LoadableMessage();
loadable.setLoader()

instanceof loadable.$refs.async === Loader
```

Returns **[Promise][5]** 

## render

Renders the optional template

Executes the template function set in `config.template` passing an object containing a `props`
key equal to the `state.props` key.

### Examples

```javascript
const template = (props) => `<div>${props.message}</div>`;

const LoadableMessage = Loadable({
  component: Message,
  template
});

const loadable = new LoadableMessage();
loadable.setState({ props: { message: 'Hello World' }});
const html = loadable.render();
html === '<div>Hello World</div>';
```

Returns **([string][6] | null)** returns null if the template function returns a falsy value

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[2]: #loadable

[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[4]: https://developer.mozilla.org/docs/Web/API/Element

[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[6]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String
